# dist_task

<div align="center">

![Go Version](https://img.shields.io/badge/Go-1.21%2B-blue)
![License](https://img.shields.io/badge/License-MIT-green)
![Stars](https://img.shields.io/github/stars/dist_task/dist_task)

**åˆ†å¸ƒå¼äº‹åŠ¡å¯è§‚æµ‹æ€§å¹³å°**

[English](./README_EN.md) | ä¸­æ–‡

</div>

---

## ğŸ“– é¡¹ç›®ç®€ä»‹

dist_task æ˜¯ä¸€ä¸ªè½»é‡çº§çš„**åˆ†å¸ƒå¼äº‹åŠ¡å¯è§‚æµ‹æ€§å¹³å°**ï¼Œä¸“æ³¨äºåˆ†å¸ƒå¼äº‹åŠ¡çš„æµç¨‹ç¼–æ’ã€å¼‚å¸¸å‘ç°å’Œè§‚æµ‹å®šä½èƒ½åŠ›ã€‚

å¦‚æœä½ æœ‰ä»¥ä¸‹éœ€æ±‚ï¼Œdist_task æ˜¯ä½ çš„ç†æƒ³é€‰æ‹©ï¼š

- âœ… éœ€è¦ç®¡ç†å¤æ‚çš„ä¸šåŠ¡æµç¨‹ï¼ˆä¸‹å• â†’ æ‰£æ¬¾ â†’ æ‰£åº“å­˜ â†’ å‘è´§ï¼‰
- âœ… éœ€è¦ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†å’Œäººå·¥å¹²é¢„æœºåˆ¶
- âœ… éœ€è¦å®Œæ•´çš„æ‰§è¡Œæ—¥å¿—å’Œå¯è§‚æµ‹æ€§
- âœ… éœ€è¦è½»é‡çº§ã€æ˜“ä¸Šæ‰‹çš„è§£å†³æ–¹æ¡ˆ

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

| ç‰¹æ€§ | æè¿° |
|------|------|
| ğŸ“¦ **æµç¨‹ç¼–æ’** | æ”¯æŒä¸²è¡Œå’Œå¹¶è¡Œä»»åŠ¡æ‰§è¡Œ |
| ğŸ”§ **å¤šç§ä»»åŠ¡ç±»å‹** | RPCã€MQã€HTTPã€DB |
| ğŸ“‹ **å‚æ•°æ ¡éªŒ** | å†…ç½®å‚æ•°è§£æå’Œæ ¡éªŒèƒ½åŠ› |
| âš ï¸ **å¼‚å¸¸è¿½è¸ª** | å®Œæ•´çš„æ‰§è¡Œæ—¥å¿—å’Œå¼‚å¸¸è®°å½• |
| ğŸ‘¤ **äººå·¥å¹²é¢„** | æ”¯æŒå¼‚å¸¸çš„äººå·¥å¤„ç†å’Œé‡è¯• |
| ğŸ“Š **å¯è§†åŒ–** | æä¾› Web ç•Œé¢å®æ—¶ç›‘æ§ï¼ˆå¼€å‘ä¸­ï¼‰ |

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        dist_task Platform                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Web UI    â”‚  â”‚  REST API   â”‚  â”‚   Command Line Tools    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚               â”‚                     â”‚                  â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                           â”‚                                      â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚                    â”‚   Gin API   â”‚                               â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚                           â”‚                                      â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚     â”‚                     â”‚                     â”‚                â”‚
â”‚     â–¼                     â–¼                     â–¼                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚ â”‚  Engine  â”‚       â”‚ Retry Sched  â”‚      â”‚  Admin   â”‚          â”‚
â”‚ â”‚  æ‰§è¡Œå¼•æ“ â”‚       â”‚  é‡è¯•è°ƒåº¦å™¨   â”‚      â”‚  ç®¡ç†ç«¯  â”‚          â”‚
â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚      â”‚                    â”‚                                      â”‚
â”‚      â–¼                    â–¼                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚ â”‚Executor  â”‚       â”‚ Exception    â”‚                              â”‚
â”‚ â”‚ æ‰§è¡Œå™¨ä»¬  â”‚       â”‚ å¼‚å¸¸å¤„ç†å™¨   â”‚                              â”‚
â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚      â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         External Systems                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚RPC è°ƒç”¨ â”‚  â”‚  MQ     â”‚  â”‚ HTTP    â”‚  â”‚  MySQL Database     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Go 1.21+
- MySQL 8.0
- RocketMQï¼ˆå¯é€‰ï¼Œç”¨äº MQ ä»»åŠ¡ï¼‰

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/dist_task/dist_task.git
cd dist_task
```

### 2. é…ç½®æ•°æ®åº“

ä¿®æ”¹ `configs/app.toml`ï¼š

```toml
[database]
host = "127.0.0.1"
port = 3306
username = "root"
password = "your_password"
name = "dist_task"
```

### 3. åˆå§‹åŒ–æ•°æ®åº“

```bash
mysql -u root -p < migrations/001_init_schema.sql
```

### 4. å¯åŠ¨æœåŠ¡

```bash
# æ–¹å¼ä¸€ï¼šç›´æ¥è¿è¡Œ
go run cmd/server/main.go

# æ–¹å¼äºŒï¼šä½¿ç”¨ Makefile
make run

# æ–¹å¼ä¸‰ï¼šDocker å¯åŠ¨
docker-compose up -d
```

æœåŠ¡å¯åŠ¨åè®¿é—®ï¼š
- **API**: http://localhost:8080
- **å¥åº·æ£€æŸ¥**: http://localhost:8080/health

---

## ğŸ“– ä½¿ç”¨æŒ‡å—

### 1. åˆ›å»º Flowï¼ˆæµç¨‹å®šä¹‰ï¼‰

Flow æ˜¯ä¸šåŠ¡æµç¨‹çš„å®šä¹‰ï¼Œä½¿ç”¨ JSON æ ¼å¼ï¼š

```bash
curl -X POST http://localhost:8080/api/v1/flows \
  -H "Content-Type: application/json" \
  -d '{
    "name": "payment_flow",
    "description": "æ”¯ä»˜æµç¨‹ï¼šæ‰£æ¬¾ -> æ‰£åº“å­˜ -> å‘é€šçŸ¥",
    "flow_type": "payment",
    "definition": {
      "name": "payment_flow",
      "tasks": [
        {
          "id": "deduct",
          "task_name": "deduct",
          "description": "æ‰£æ¬¾",
          "config": {
            "service": "payment-service",
            "method": "deduct"
          },
          "retry": {
            "strategy": "auto",
            "max_attempts": 3,
            "interval": 5
          }
        }
      ]
    },
    "create_user": "admin"
  }'
```

### 2. å¯åŠ¨äº‹åŠ¡

```bash
curl -X POST http://localhost:8080/api/v1/transactions \
  -H "Content-Type: application/json" \
  -d '{
    "instance_id": "order_001",
    "flow_id": "abc123",
    "params": {
      "deduct": {
        "user_id": "user_1001",
        "amount": 99,
        "order_id": "order_001"
      }
    }
  }'
```

### 3. æŸ¥çœ‹çŠ¶æ€

```bash
curl http://localhost:8080/api/v1/transactions/order_001
```

---

## ğŸ“š æ–‡æ¡£

- [æ¶æ„è®¾è®¡](docs/architecture.md)
- [Flow å®šä¹‰æŒ‡å—](docs/flow-definition.md)
- [ä»»åŠ¡ç±»å‹è¯´æ˜](docs/task-types.md)
- [API æ–‡æ¡£](docs/api.md)
- [éƒ¨ç½²æŒ‡å—](docs/deployment.md)
- [å¸¸è§é—®é¢˜](docs/faq.md)

---

## ğŸ›£ï¸ è·¯çº¿å›¾

æŸ¥çœ‹æˆ‘ä»¬çš„ [Roadmap](docs/roadmap.md) äº†è§£æœªæ¥è®¡åˆ’ã€‚

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·é˜…è¯» [è´¡çŒ®æŒ‡å—](CONTRIBUTING.md) äº†è§£è¯¦æƒ…ã€‚

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ï¼Œè¯¦æƒ…è¯·æŸ¥çœ‹ [LICENSE](LICENSE)ã€‚

---

## ğŸ“ è”ç³»æ–¹å¼

- GitHub Issues: [Issues](https://github.com/dist_task/dist_task/issues)
- è®¨è®ºç¾¤: [Discord](https://discord.gg/dist_task)

---

<div align="center">

**å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ â­ Star æ”¯æŒï¼**

</div>
